import { cn } from "@/lib/utils";
import { useState, useEffect } from "react";
import { MenuItems } from "./sidebar/MenuItems";
import { BetaPrompt } from "./sidebar/BetaPrompt";
import { CollapseButton } from "./sidebar/CollapseButton";

const SIDEBAR_STATE_KEY = "sidebar-collapsed-state";

const menuItems = [{
  icon: () => (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M6.5 13C8.98528 13 11 15.0147 11 17.5C11 19.9853 8.98528 22 6.5 22C4.01472 22 2 19.9853 2 17.5C2 15.0147 4.01472 13 6.5 13ZM18.8018 13C20.568 13 22 14.432 22 16.1982V18.8018C22 20.568 20.568 22 18.8018 22H16.1982C14.432 22 13 20.568 13 18.8018V16.1982C13 14.432 14.432 13 16.1982 13H18.8018ZM6.5 15C5.11928 15 4 16.1193 4 17.5C4 18.8807 5.11928 20 6.5 20C7.88072 20 9 18.8807 9 17.5C9 16.1193 7.88072 15 6.5 15ZM16.1982 15C15.5365 15 15 15.5365 15 16.1982V18.8018C15 19.4635 15.5365 20 16.1982 20H18.8018C19.4635 20 20 19.4635 20 18.8018V16.1982C20 15.5365 19.4635 15 18.8018 15H16.1982ZM7.80176 2C9.56804 2 11 3.43196 11 5.19824V7.80176C11 9.56804 9.56804 11 7.80176 11H5.19824C3.43196 11 2 9.56804 2 7.80176V5.19824C2 3.43196 3.43196 2 5.19824 2H7.80176ZM16.8906 2.28809C17.6505 1.94928 18.5465 2.19417 19.0303 2.86816L19.1279 3.01855L19.1289 3.02051L21.7666 7.63184L21.8213 7.73438C21.94 7.97701 22 8.24169 22 8.50781C22 9.47982 21.2107 10.2637 20.2422 10.2637H14.9609C14.731 10.2637 14.5036 10.219 14.293 10.1328L14.0879 10.0332L14.085 10.0303C13.2447 9.54647 12.9532 8.47486 13.4355 7.63281L16.0791 3.01953V3.02051C16.2363 2.74598 16.4623 2.52273 16.7305 2.36914L16.8906 2.28809ZM5.19824 4C4.53653 4 4 4.53653 4 5.19824V7.80176C4 8.46347 4.53653 9 5.19824 9H7.80176C8.46347 9 9 8.46347 9 7.80176V5.19824C9 4.53653 8.46347 4 7.80176 4H5.19824ZM15.3789 8.26367H19.8232L17.6035 4.38184L15.3789 8.26367Z" fill="#C0C0C0"/>
    </svg>
  ),
  label: "Dashboard",
  path: "/"
}, {
  icon: () => (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M8.98438 18.75C9.73114 18.8258 10.3144 19.4562 10.3145 20.2236C10.3145 21.0423 9.65071 21.7051 8.83301 21.7051C8.06558 21.7051 7.43511 21.1219 7.35938 20.375L7.35156 20.2236L7.35938 20.0723C7.43524 19.3255 8.06556 18.7422 8.83301 18.7422L8.98438 18.75ZM18.1953 18.75C18.942 18.8258 19.5253 19.4562 19.5254 20.2236C19.5254 21.0424 18.8616 21.7051 18.0439 21.7051C17.2766 21.7051 16.6461 21.122 16.5703 20.375L16.5625 20.2236L16.5703 20.0723C16.6462 19.3254 17.2766 18.7422 18.0439 18.7422L18.1953 18.75ZM5.16699 2.01465C5.55628 2.08179 5.87643 2.37557 5.96973 2.77051L6.54883 5.22168L19.8701 5.11426C21.2957 5.10131 22.323 6.47777 21.9062 7.84082L21.9072 7.8418L20.0752 13.8457C19.6887 15.115 18.6182 16.0453 17.3262 16.2646L17.0645 16.2988C15.7099 16.4244 14.6527 16.5231 13.5957 16.6211L10.127 16.9424C8.61931 17.0823 7.23237 16.1603 6.75879 14.751L6.67676 14.4619L4.20508 4H3C2.44772 4 2 3.55228 2 3C2 2.44772 2.44772 2 3 2H4.99609L5.16699 2.01465ZM7.02051 7.21875L8.62305 14.002L8.6543 14.1123C8.83562 14.6523 9.36674 15.0046 9.94238 14.9512L13.4111 14.6289C14.4679 14.5309 15.5247 14.4332 16.8789 14.3076L16.9912 14.293C17.542 14.1994 17.9977 13.8027 18.1621 13.2627V13.2617L19.9941 7.25781V7.25684L19.9971 7.2041C19.9875 7.15435 19.9439 7.1139 19.8887 7.11426H19.8877L7.02051 7.21875ZM15.1064 9.7959C15.6107 9.84715 16.0039 10.2733 16.0039 10.791C16.0039 11.3088 15.6107 11.7349 15.1064 11.7861L15.0039 11.791H11.8633C11.311 11.791 10.8633 11.3433 10.8633 10.791C10.8633 10.2387 11.311 9.79102 11.8633 9.79102H15.0039L15.1064 9.7959Z" fill="#C0C0C0"/>
    </svg>
  ),
  label: "Orders",
  path: "/orders"
}, {
  icon: () => (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M10.5977 2.35156C11.6204 1.84934 12.8323 1.88516 13.8281 2.45898H13.8291L19.5078 5.73828H19.5088L19.7031 5.85938C20.0903 6.11902 20.4141 6.45229 20.6631 6.83301C20.6963 6.87376 20.7277 6.91693 20.7549 6.96387C20.7779 7.00368 20.7955 7.04552 20.8125 7.08691C21.0768 7.57837 21.2246 8.13408 21.2246 8.71191V15.2695C21.2246 16.4189 20.6488 17.4872 19.7021 18.1211L19.5078 18.2422L13.8291 21.5215L13.8281 21.5205C13.3659 21.7873 12.8575 21.938 12.3428 21.9727C12.2696 21.9897 12.1936 22 12.1152 22C12.0379 22 11.9629 21.9902 11.8906 21.9736C11.3726 21.9402 10.8606 21.7891 10.3955 21.5205V21.5215L4.71582 18.2422V18.2412C3.65465 17.6284 3 16.4953 3 15.2695V8.71191C3.00001 7.48449 3.65518 6.35162 4.71582 5.73828L10.3955 2.45898H10.3965L10.5977 2.35156ZM5 15.2695C5 15.7173 5.20968 16.1356 5.55859 16.4043L5.71582 16.5098L11.1152 19.627V12.5361L8.91406 11.2617V12.2822C8.91383 12.8343 8.4662 13.2822 7.91406 13.2822C7.36192 13.2822 6.91429 12.8343 6.91406 12.2822V10.1045L5 8.99805V15.2695ZM13.1152 12.5371V19.623L18.5078 16.5098L18.666 16.4043C19.0148 16.1356 19.2246 15.7172 19.2246 15.2695V9.00391L13.1152 12.5371ZM9.9209 9.53516L12.1162 10.8057L18.1943 7.28906L15.9971 6.02051L9.9209 9.53516ZM12.8291 4.19238C12.3851 3.93658 11.8386 3.93654 11.3945 4.19238L11.3936 4.19141L6.03418 7.28613L7.9248 8.37988L13.999 4.86621L12.8291 4.19141V4.19238Z" fill="#C0C0C0"/>
    </svg>    
  ),
  label: "Products",
  path: "/products"
}, {
  icon: () => (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M9.77539 14.2656C12.3526 14.2657 14.2284 14.9689 15.4717 16.0898C16.7133 17.2093 17.2334 18.6661 17.2334 19.9814C17.2334 20.5336 16.7855 20.9812 16.2334 20.9814C15.6811 20.9814 15.2334 20.5337 15.2334 19.9814C15.2334 19.1873 14.9205 18.2862 14.1318 17.5752C13.3448 16.8657 11.992 16.2657 9.77539 16.2656C7.55986 16.2656 6.20657 16.8694 5.41895 17.583C4.62891 18.2989 4.31641 19.2057 4.31641 20C4.3162 20.5521 3.86857 21 3.31641 21C2.76425 21 2.31661 20.5521 2.31641 20C2.31641 18.6857 2.83567 17.2246 4.07617 16.1006C5.31915 14.9744 7.19587 14.2656 9.77539 14.2656ZM17.5527 13.9502L17.6543 13.9658L17.9443 14.0312C19.368 14.3845 20.3833 15.1059 21.043 16.0107C21.7338 16.9583 21.9863 18.0402 21.9863 18.9648C21.9863 19.5171 21.5386 19.9648 20.9863 19.9648C20.4342 19.9647 19.9863 19.517 19.9863 18.9648C19.9863 18.3854 19.8257 17.7356 19.4268 17.1885C19.0647 16.692 18.4639 16.22 17.459 15.9717L17.252 15.9248L17.1533 15.8994C16.6694 15.748 16.3695 15.2515 16.4736 14.7441C16.5778 14.2371 17.0486 13.8991 17.5527 13.9502ZM9.77344 3C12.6043 3.00015 14.8984 5.29511 14.8984 8.12598C14.8983 10.9567 12.6042 13.2508 9.77344 13.251C6.94339 13.251 4.6486 10.9566 4.64844 8.12598C4.64844 5.29517 6.94328 3 9.77344 3ZM16.6377 4.66895L16.7393 4.68555L16.9111 4.72461C18.6159 5.15848 19.8873 6.66898 19.9619 8.48828L19.9658 8.6709C19.9594 10.4071 18.864 11.8844 17.3291 12.458C16.8118 12.6512 16.2353 12.3884 16.042 11.8711C15.8489 11.3539 16.1119 10.7784 16.6289 10.585C17.409 10.2934 17.9625 9.54263 17.9658 8.66406L17.958 8.48047C17.8855 7.63032 17.2962 6.92553 16.5039 6.68652L16.3311 6.64258L16.2324 6.61719C15.749 6.46428 15.4509 5.96697 15.5566 5.45996C15.6623 4.95329 16.1338 4.61641 16.6377 4.66895ZM9.77344 5C8.04815 5 6.64844 6.39944 6.64844 8.12598C6.6486 9.85232 8.04825 11.251 9.77344 11.251C11.4996 11.2508 12.8983 9.85208 12.8984 8.12598C12.8984 6.39969 11.4997 5.00015 9.77344 5Z" fill="#C0C0C0"/>
    </svg>
  ),
  label: "Customers",
  path: "/customers"
}, {
  icon: () => (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M9.46289 2.01367C10.4516 2.01371 11.3803 2.48021 11.9727 3.26855L12.8281 4.40625L12.915 4.50781C13.13 4.73287 13.4286 4.86328 13.7441 4.86426H16.3945C18.2349 4.86426 19.7254 5.3358 20.7188 6.49902C21.6811 7.62599 22 9.2035 22 10.999V11.0049L21.9736 15.6602C21.9725 17.5311 21.4165 19.142 20.2725 20.2861C19.1273 21.4313 17.5144 21.9873 15.6406 21.9873H8.34473C6.46762 21.9873 4.85133 21.432 3.7041 20.2871C2.55669 19.1419 2 17.5281 2 15.6543V8.3418C2 6.57619 2.31822 4.97121 3.25293 3.79785C4.22558 2.57692 5.70731 2.01367 7.58789 2.01367H9.46289ZM7.58789 4.01367C6.11276 4.01367 5.29964 4.43863 4.81738 5.04395C4.29724 5.69686 4 6.75655 4 8.3418V15.6543C4 17.1351 4.43337 18.1886 5.11719 18.8711C5.80134 19.5539 6.85832 19.9873 8.34473 19.9873H15.6406C17.1224 19.9873 18.176 19.5544 18.8584 18.8721C19.5408 18.1896 19.9736 17.1358 19.9736 15.6543V15.6494L20 10.999L19.9863 10.418C19.9216 9.13069 19.635 8.30944 19.1982 7.79785C18.7299 7.24943 17.9178 6.86426 16.3945 6.86426H13.7383C12.7525 6.86131 11.825 6.39734 11.2314 5.61035L11.2305 5.60938L10.374 4.4707V4.46973C10.158 4.18222 9.82031 4.01371 9.46289 4.01367H7.58789ZM13.2803 11.9717C13.9058 11.3775 14.9086 11.3861 15.5234 12.0225H15.5244L17.3848 13.9512L17.4521 14.0283C17.7653 14.4267 17.7318 15.0058 17.3594 15.3652C16.9867 15.7247 16.4065 15.7375 16.0195 15.4102L15.9453 15.3398L14.3955 13.7334L12.3555 16.1436V16.1445C11.769 16.8362 10.7375 16.8923 10.0791 16.3047L9.95215 16.1777L9.12012 15.251L8.06152 16.3672L7.9873 16.4385C7.60315 16.7689 7.02305
